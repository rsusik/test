"use strict";(self["webpackChunkkeydrop"]=self["webpackChunkkeydrop"]||[]).push([[831],{6525:(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});var n=s(3673);const o={key:0},i=(0,n._)("div",{class:"counter-wrapper"},[(0,n._)("div",{class:"counter"}," THE END ")],-1),r=[i],a={key:1},l={class:"top-controls"},c={class:"absolute-full flex flex-center"},d={class:"absolute-full flex flex-center"},h={key:0,class:"counter-wrapper"},m={key:0,class:"counter"},u={key:1,class:"counter"};function g(e,t,s,i,g,p){const y=(0,n.up)("q-badge"),f=(0,n.up)("q-linear-progress"),T=(0,n.up)("q-card-section"),v=(0,n.up)("q-card"),x=(0,n.up)("q-page-container"),b=(0,n.up)("Keyboard"),S=(0,n.up)("Keyboard2"),w=(0,n.up)("NormalKeyboard"),k=(0,n.up)("q-toolbar-title"),D=(0,n.up)("q-toolbar"),C=(0,n.up)("q-footer"),K=(0,n.up)("q-layout");return(0,n.wg)(),(0,n.j4)(K,{view:"hHh lpR fFf"},{default:(0,n.w5)((()=>[(0,n.Wm)(x,{class:"q-px-md"},{default:(0,n.w5)((()=>[e.gameFinished?((0,n.wg)(),(0,n.iD)("div",o,r)):((0,n.wg)(),(0,n.iD)("div",a,[(0,n._)("div",l,[(0,n.Wm)(f,{size:"30px",value:e.testProgress,color:"accent",class:"q-mt-sm"},{default:(0,n.w5)((()=>[(0,n._)("div",c,[(0,n.Wm)(y,{color:"white","text-color":"accent",label:e.testProgressLabel},null,8,["label"])])])),_:1},8,["value"]),(0,n.Wm)(f,{size:"30px",value:e.sentenceProgress,color:"accent",class:"q-mt-sm"},{default:(0,n.w5)((()=>[(0,n._)("div",d,[(0,n.Wm)(y,{color:"white","text-color":"accent",label:e.sentenceProgressLabel},null,8,["label"])])])),_:1},8,["value"])]),(0,n.Wm)(v,{flat:"",bordered:""},{default:(0,n.w5)((()=>[e.sentence&&e.sentence.length>0?((0,n.wg)(),(0,n.j4)(T,{key:0,style:{"font-size":"16pt"},innerHTML:e.sentenceDisp},null,8,["innerHTML"])):(0,n.kq)("",!0)])),_:1}),e.startGameDelayCounter>=0?((0,n.wg)(),(0,n.iD)("div",h,[e.startGameDelayCounter>1?((0,n.wg)(),(0,n.iD)("div",m," Ready ")):(0,n.kq)("",!0),e.startGameDelayCounter>=0&&e.startGameDelayCounter<=1?((0,n.wg)(),(0,n.iD)("div",u," GO! ")):(0,n.kq)("",!0)])):(0,n.kq)("",!0)]))])),_:1}),(0,n.Wm)(C,{class:"footer"},{default:(0,n.w5)((()=>[(0,n.Wm)(D,null,{default:(0,n.w5)((()=>[(0,n.Wm)(k,null,{default:(0,n.w5)((()=>["flexi"==e.gamemode?((0,n.wg)(),(0,n.j4)(b,{key:0,ref:"keyboard",modelValue:e.text,"onUpdate:modelValue":t[0]||(t[0]=t=>e.text=t),onKeypressed:t[1]||(t[1]=t=>e.logKey(t)),onWordpressed:t[2]||(t[2]=t=>e.logWord(t))},null,8,["modelValue"])):"flexi2"==e.gamemode?((0,n.wg)(),(0,n.j4)(S,{key:1,ref:"keyboard2",modelValue:e.text,"onUpdate:modelValue":t[3]||(t[3]=t=>e.text=t),onKeypressed:t[4]||(t[4]=t=>e.logKey(t)),onWordpressed:t[5]||(t[5]=t=>e.logWord(t))},null,8,["modelValue"])):((0,n.wg)(),(0,n.j4)(w,{key:2,ref:"keyboardN",modelValue:e.text,"onUpdate:modelValue":t[6]||(t[6]=t=>e.text=t),onKeypressed:t[7]||(t[7]=t=>e.logKey(t)),onWordpressed:t[8]||(t[8]=t=>e.logWord(t))},null,8,["modelValue"]))])),_:1})])),_:1})])),_:1})])),_:1})}s(71),s(3985);var p=s(688),y=s(5827),f=s(3054);s(52);const T=(0,n.aZ)({name:"MainLayout",components:{Keyboard:p.Z,Keyboard2:y.Z,NormalKeyboard:f.Z},setup(){return{}},data(){return{text:"",startGameDelayCounter:3,startGameDelayInterval:void 0,refreshControlsInterval:void 0,sentenceIdx:-1,pressedKeys:[],completedSentences:[],gameFinished:!1,startTime:0,gameTimeStart:0,gameTimeStop:0,sentenceTimeStart:0,sentenceTimeStop:0,sentenceTimeElapsed:0,testTimeElapsed:0,sentence:void 0,gamemode:void 0}},computed:{viewportHeight:function(){return this.$q.screen.height-this.getFooterSize()},testProgressLabel:function(){return"Test progress: ðŸ•‘ "+this.testTimeDisp+"s | "+(this.sentenceIdx>-1?this.sentenceIdx:0)+"/"+this.sentences.length+" ("+(100*this.testProgress).toFixed(0)+"%)"},testProgress:function(){return this.sentenceIdx>-1?this.sentenceIdx/this.sentences.length:0},sentenceProgressLabel:function(){return"Round progress: ðŸ•‘ "+this.sentenceTimeDisp+"s | "+(100*this.sentenceProgress).toFixed(0)+"%"},sentenceProgress:function(){return this.sentence?this.correctCharacters()/this.sentence.length:0},testTimeDisp:function(){return this.testTimeElapsed?this.testTimeElapsed.toFixed(1):0},sentenceTimeDisp:function(){return this.sentenceTimeElapsed?this.sentenceTimeElapsed.toFixed(1):0},sentenceDisp:function(){let e=this.sentence.toLowerCase(),t=this.text.toLowerCase(),s='<span style="color:black; background-color:lightgreen;">',n=this.correctCharacters();return s+=e.substr(0,n)+"</span>",n<t.length&&(s+='<span style="background-color:red">'+e.substr(n,t.length-n)+"</span>",n=t.length),s+='<span style="color:#aaa">'+e.substr(n,e.length-n)+"</span>",s}},deactivated(){},unmounted(){this.gameEnd()},created(){var e;this.gamemode=null!==(e=this.$route.params.mode)&&void 0!==e?e:"flexi",this.sentences=["this is","the","here"],this.startGameDelayCounter=3,this.gameFinished=!1,this.pressedKeys=[],this.sentenceIdx=-1,this.gameTimeStart=void 0,this.gameTimeStop=void 0,this.sentenceTimeStart=void 0,this.sentenceTimeStop=void 0,this.sentenceTimeElapsed=0,this.testTimeElapsed=0,this.completedSentences=[],this.refreshControlsInterval=setInterval((()=>{this.refreshControls()}),100),this.startGameDelayInterval=setInterval((()=>{this.startGameDelayCounter--,this.startGameDelayCounter<0&&(clearInterval(this.startGameDelayInterval),this.gameStart())}),1e3)},mounted(){},methods:{correctCharacters:function(){if(void 0==this.sentence||void 0==this.text)return 0;let e=this.sentence.toLowerCase(),t=this.text.toLowerCase(),s=0;while(e[s]==t[s]&&s<e.length&&s<t.length)s++;return s},resetKeyboard:function(){for(let e of[this.$refs.keyboard,this.$refs.keyboard2,this.$refs.keyboardN])void 0!=e&&e.reset()},refreshControls:function(){this.sentenceTimeElapsed=(Date.now()-this.sentenceTimeStart)/1e3,this.testTimeElapsed=(Date.now()-this.gameTimeStart)/1e3},nextSentence:function(){this.sentenceIdx>-1&&(this.sentenceTimeStop=Date.now(),this.completedSentences.push({sentence:this.sentence,text:this.text,startTime:this.sentenceTimeStart,endTime:this.sentenceTimeStop,pressedKeys:this.pressedKeys})),this.pressedKeys=[],this.sentenceTimeStop=void 0,this.sentenceTimeStart=void 0,this.resetKeyboard(),this.sentenceIdx<this.sentences.length-1?(this.sentenceIdx++,this.sentence=this.sentences[this.sentenceIdx],this.sentenceTimeStart=Date.now()):this.gameEnd()},logKey:function(e){this.pressedKeys.push({key:{key:e.key,label:e.label,original_key:e.original_key,original_label:e.original_label},time:Date.now(),text:this.text,sentence:this.sentence}),this.text.toLowerCase()==this.sentence.toLowerCase()&&this.nextSentence()},logTestScore:function(){let e=localStorage.getItem("games");e=void 0==e?[]:JSON.parse(e),e.push({mode:this.gamemode,startTime:this.gameTimeStart,endTime:this.gameTimeStop,sentences:Object.assign([],this.completedSentences)}),localStorage.setItem("games",JSON.stringify(e)),this.gameTimeStart=void 0,this.gameTimeStop=void 0,this.completedSentences=void 0},gameEnd:function(){1!=this.gameFinished&&(this.gameTimeStop=Date.now(),this.logTestScore(),this.gameFinished=!0,setTimeout((()=>{this.$router.push("/")}),2e3))},gameStart:function(){this.gameTimeStart=Date.now(),this.nextSentence()},getFooterSize:function(){return document.getElementsByClassName("q-footer")[0].getBoundingClientRect().height}}});var v=s(3066),x=s(2652),b=s(1598),S=s(9721),w=s(151),k=s(5589),D=s(1762),C=s(9570),K=s(3747),I=s(7518),q=s.n(I);T.render=g;const _=T;q()(T,"components",{QLayout:v.Z,QPageContainer:x.Z,QLinearProgress:b.Z,QBadge:S.Z,QCard:w.Z,QCardSection:k.Z,QFooter:D.Z,QToolbar:C.Z,QToolbarTitle:K.Z})}}]);