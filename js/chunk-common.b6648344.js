"use strict";(self["webpackChunkkeydrop"]=self["webpackChunkkeydrop"]||[]).push([[64],{3985:(t,e,i)=>{i.d(e,{Z:()=>o});i(71);const s=function(t,e,i,o){if(0==t.length||i==o&&0!=e.localeCompare(t[i].substring(0,e.length)))return{start:-1,end:-1,words:[],letters:new Set};let n=Math.round((i+o)/2);if(0==e.localeCompare(t[n].substring(0,e.length))){let i=n,s=n,o=n-1,l=new Set,r=new Set;l.add(t[n]),t[n].length>e.length&&r.add(t[n][e.length]);while(o>=0&&0==e.localeCompare(t[o].substring(0,e.length)))l.add(t[o]),t[o].length>e.length&&r.add(t[o][e.length]),o--;i=o+1,o=n+1;while(o<t.length&&0==e.localeCompare(t[o].substring(0,e.length)))l.add(t[o]),t[o].length>e.length&&r.add(t[o][e.length]),o++;return s=o-1,{start:i,end:s,words:l,letters:r}}return e.localeCompare(t[n].substring(0,e.length))<0?s(t,e,i,n-1):s(t,e,n,o)},o={findNext:s}},688:(t,e,i)=>{i.d(e,{Z:()=>f});var s=i(3673),o=i(2323);const n={class:"kb-row",style:{}},l=["value"],r=["value"],a=["value"],c=["onMousedown","onMouseup","onMouseleave","onTouchstart","onTouchend","onTouchcancel"];function h(t,e,i,h,d,k){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",n,[(0,s._)("input",{class:"",style:{"background-color":"transparent","box-shadow":"none",border:"0"},type:"button",value:t.leftWord,onClick:e[0]||(e[0]=e=>t.insertWord(t.leftWord))},null,8,l),(0,s._)("input",{class:"",style:{"background-color":"transparent","box-shadow":"none",border:"0"},type:"button",value:t.inp,onClick:e[1]||(e[1]=()=>{t.$emit("wordpressed",t.inp),t.insertWord(t.inp)})},null,8,r),(0,s._)("input",{class:"",style:{"background-color":"transparent","box-shadow":"none",border:"0"},type:"button",value:t.rightWord,onClick:e[2]||(e[2]=e=>t.insertWord(t.rightWord))},null,8,a)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.boardView,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"kb-row"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:(0,o.C_)(["btn",[e.class,{original:e.original_show}]]),style:(0,o.j5)([{position:"relative"},e.style]),onMousedown:i=>t.original_mousedown(e),onMouseup:i=>t.original_mouseup(e),onMouseleave:i=>t.original_mouseleave(e),onTouchstart:i=>t.original_touchstart(e),onTouchend:i=>t.original_touchend(e),onTouchcancel:i=>t.original_touchcancel(e)},[(0,s.Uk)((0,o.zw)(e.label.toUpperCase())+" ",1),(0,s._)("div",{class:"btn-original",style:(0,o.j5)({display:e.key==e.original_key?"none":"block"})},(0,o.zw)(e.original_label),5)],46,c)))),128))])))),128))])}i(7386),i(71),i(7070);var d=i(3985);const k=i(52),y=(0,s.aZ)({name:"Keyboard",props:{modelValue:String},emits:["keypressed","wordpressed"],components:{},setup(){return{}},watch:{modelValue(t){let e=t.lastIndexOf(" "),i=(t.lastIndexOf("."),t.lastIndexOf(","),t.lastIndexOf("\n")),s=Math.max(i,e);-1==s?(this.internal_text="",this.internal_inp=t):s==t.length-1?(this.internal_text=t,this.internal_inp=""):(this.internal_text=t.substring(0,s+1),this.internal_inp=t.substring(s+1,t.length)),this.updateBoard()}},data(){return{internal_inp:"",words1:[],words2:[],words3:[],words4:[],wordsx:[],charmap1:[],charmap2:[],charmap3:[],charmap4:[],charmap5:[],internal_text:"",leftWord:"",rightWord:"",keys:{},boardView:[],tree:{},key_timeouts:{}}},computed:{fullText:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}},text:{get(){return this.internal_text},set(t){this.internal_text=t,this.fullText=this.internal_text+this.inp}},inp:{get(){return this.internal_inp},set(t){this.internal_inp=t,this.fullText=this.text+this.internal_inp}},words:function(){return void 0==this.inp||0==this.inp.length?this.words1:1==this.inp.length?this.words2:2==this.inp.length?this.words3:3==this.inp.length?this.words4:this.wordsx},row0:function(){return Object.fromEntries(Object.entries(this.keys).filter((([t,e])=>0==e.row)))},row1:function(){return Object.fromEntries(Object.entries(this.keys).filter((([t,e])=>1==e.row)))},row2:function(){return Object.fromEntries(Object.entries(this.keys).filter((([t,e])=>2==e.row)))},row3:function(){return Object.fromEntries(Object.entries(this.keys).filter((([t,e])=>3==e.row)))},wordsLeft:function(){if(this.inp.length<1)return new Set;let t=d.Z.findNext(this.words,this.inp,0,this.words.length);return t.words},lettersLeft:function(){const t=(t,e)=>{let i=t[e];return void 0==i||0==i.length?new Set:new Set(i)},e=e=>void 0==e||0==e.length?"q,w,e,r,t,y,u,i,o,p,l,k,j,h,g,f,d,s,a,z,x,c,v,b,n,m".split(","):1==e.length?t(this.charmap1,e):2==e.length?t(this.charmap2,e):3==e.length?t(this.charmap3,e):4==e.length?t(this.charmap4,e):5==e.length?t(this.charmap5,e):void console.log("No more");if(this.inp.length<1)return new Set;if(this.inp.length<5&&void 0!=this.words)return e(this.inp);if(void 0!=this.words){let t=d.Z.findNext(this.words,this.inp,0,this.words.length);return t.letters}return console.log("ERROR: something went wrong."),new Set}},created(){const t=(t,e)=>{k.get(e).then((e=>{Object.assign(t,e.data.split("\n")),this.updateBoard()}))},e=(t,e)=>{k.get(e).then((e=>{Object.assign(t,e.data),this.updateBoard()}))};e(this.charmap1,"mm1.json"),e(this.charmap2,"mm2.json"),e(this.charmap3,"mm3.json"),e(this.charmap4,"mm4.json"),e(this.charmap5,"mm5.json"),t(this.wordsx,"unigram_words_gt5.txt");this.board=[[{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0}],[{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0}],[{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0}],[{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0}]],this.key_positions={q:{row:0,col:0},w:{row:0,col:1},e:{row:0,col:2},r:{row:0,col:3},t:{row:0,col:4},y:{row:0,col:5},u:{row:0,col:6},i:{row:0,col:7},o:{row:0,col:8},p:{row:0,col:9},a:{row:1,col:0},s:{row:1,col:1},d:{row:1,col:2},f:{row:1,col:3},g:{row:1,col:4},h:{row:1,col:5},j:{row:1,col:6},k:{row:1,col:7},l:{row:1,col:8},shift:{row:2,col:0},z:{row:2,col:1},x:{row:2,col:2},c:{row:2,col:3},v:{row:2,col:4},b:{row:2,col:5},n:{row:2,col:6},m:{row:2,col:7},backspace:{row:2,col:8},numeric:{row:3,col:0},comma:{row:3,col:1},emoji:{row:3,col:2},space:{row:3,col:3},dot:{row:3,col:4},enter:{row:3,col:5}},this.key_neighbours={q:["w","a"],w:["q","a","s","e"],e:["w","s","d","r"],r:["e","d","f","t"],t:["r","f","g","y"],y:["t","g","h","u"],u:["y","h","j","i"],i:["u","j","k","o"],o:["i","k","l","p"],p:["o","l"],a:["q","w","s"],s:["a","w","e","d","z"],d:["s","e","r","f","x"],f:["d","r","t","g","c"],g:["f","t","y","h","v"],h:["g","y","u","j","b"],j:["h","u","i","k","n"],k:["j","i","o","l","m"],l:["k","o","p"],shift:[],z:["s","x"],x:["z","d","c"],c:["x","f","v"],v:["c","g","b"],b:["v","h","n"],n:["b","j","m"],m:["n","k"],backspace:[],numeric:[],comma:[],emoji:[],space:[],dot:[],enter:[]},this.key_style={q:{class:"btn-row1",style:""},w:{class:"btn-row1",style:""},e:{class:"btn-row1",style:""},r:{class:"btn-row1",style:""},t:{class:"btn-row1",style:""},y:{class:"btn-row1",style:""},u:{class:"btn-row1",style:""},i:{class:"btn-row1",style:""},o:{class:"btn-row1",style:""},p:{class:"btn-row1",style:""},a:{class:"btn-row2",style:"margin-left: 10pt;"},s:{class:"btn-row2",style:""},d:{class:"btn-row2",style:""},f:{class:"btn-row2",style:""},g:{class:"btn-row2",style:""},h:{class:"btn-row2",style:""},j:{class:"btn-row2",style:""},k:{class:"btn-row2",style:""},l:{class:"btn-row2",style:"margin-right: 10pt;"},shift:{class:"btn-shift",style:""},z:{class:"btn-row3",style:""},x:{class:"btn-row3",style:""},c:{class:"btn-row3",style:""},v:{class:"btn-row3",style:""},b:{class:"btn-row3",style:""},n:{class:"btn-row3",style:""},m:{class:"btn-row3",style:""},backspace:{class:"btn-shift",style:""},numeric:{class:"btn-shift",style:""},comma:{class:"btn-row4",style:""},emoji:{class:"btn-row4",style:""},space:{class:"btn-space",style:""},dot:{class:"btn-row4",style:""},enter:{class:"btn-shift",style:""}},this.key_labels={q:"q",w:"w",e:"e",r:"r",t:"t",y:"y",u:"u",i:"i",o:"o",p:"p",a:"a",s:"s",d:"d",f:"f",g:"g",h:"h",j:"j",k:"k",l:"l",shift:"⇧",z:"z",x:"x",c:"c",v:"v",b:"b",n:"n",m:"m",backspace:"⌫",numeric:"",comma:",",emoji:"🙂",space:"_",dot:".",enter:"⏎"},this.key_actions={q:this.keyClicked,w:this.keyClicked,e:this.keyClicked,r:this.keyClicked,t:this.keyClicked,y:this.keyClicked,u:this.keyClicked,i:this.keyClicked,o:this.keyClicked,p:this.keyClicked,a:this.keyClicked,s:this.keyClicked,d:this.keyClicked,f:this.keyClicked,g:this.keyClicked,h:this.keyClicked,j:this.keyClicked,k:this.keyClicked,l:this.keyClicked,shift:this.shiftClicked,z:this.keyClicked,x:this.keyClicked,c:this.keyClicked,v:this.keyClicked,b:this.keyClicked,n:this.keyClicked,m:this.keyClicked,backspace:this.keyFunWraper(this.backspaceClicked),numeric:this.numClicked,comma:this.commaClicked,emoji:this.keyClicked,space:this.spaceClicked,dot:this.dotClicked,enter:this.enterClicked},this.standard_keys=["shift","backspace","numeric","comma","emoji","space","dot","enter"]},mounted(){this.updateBoard()},methods:{original_leave:function(t){t.original_show=!1,clearTimeout(this.key_timeouts[t])},original_down:function(t){t.key!=t.original_key?this.key_timeouts[t]=setTimeout((()=>{t.original_show=!0}),500):"backspace"==t.key&&(this.key_timeouts[t]=setTimeout((()=>{this.key_timeouts[t]=setInterval((()=>{this.backspaceClicked(t)}),50)}),500))},original_up:function(t){t.original_show?t.original_action(Object.assign(Object.assign({},t),{label:t.original_label,key:t.original_key,action:t.original_action})):("backspace"==t.key&&clearTimeout(this.key_timeouts[t]),t.action(t))},original_mouseleave:function(t){if(this.$q.platform.is.mobile)return!1;this.original_leave(t)},original_mousedown:function(t){if(this.$q.platform.is.mobile)return!1;this.original_down(t)},original_mouseup:function(t){if(this.$q.platform.is.mobile)return!1;this.original_up(t)},original_touchstart:function(t){this.original_down(t)},original_touchend:function(t){this.original_up(t)},original_touchcancel:function(t){this.original_leave(t)},showNotSupported:function(){this.$q.notify({type:"info",timeout:100,message:"Not supported"})},shiftClicked:function(t){this.showNotSupported()},numClicked:function(t){this.showNotSupported()},spaceClicked:function(t){this.insertWord(this.inp)},dotClicked:function(t){this.insertWord(this.inp+".")},commaClicked:function(t){this.insertWord(this.inp+",")},enterClicked:function(t){this.insertWord(this.inp,"\n")},keyFunWraper:function(t){return e=>{t(e),this.$emit("keypressed",e)}},backspaceClicked:function(t){if(this.inp.length>0)this.inp=this.inp.substring(0,this.inp.length-1),this.updateBoard();else{" "!=this.text[this.text.length-1]&&"."!=this.text[this.text.length-1]&&","!=this.text[this.text.length-1]&&"\n"!=this.text[this.text.length-1]||(this.text=this.text.substring(0,this.text.length-1));let t=this.text.split(" "),e=t.length;this.text=e>1?t.slice(0,e-1).join(" ")+" ":"",this.inp=t[e-1]}},keyClicked:function(t){this.inp=this.inp+t.label,this.updateBoard()},insertWord:function(t,e=" "){this.text+=t+e,this.inp="",this.rightWord="",this.leftWord="",this.updateBoard()},updateBoard:function(){let t=(t,e)=>{for(let i in this.key_positions){let s=this.key_positions[i].row,o=this.key_positions[i].col;if(s==t&&o==e)return i}throw"ERROR: cannot find"},e=Array.from(this.lettersLeft).concat(this.standard_keys);this.lettersLeft.size<1?e=Object.keys(this.key_neighbours):1==this.lettersLeft.size&&console.log(JSON.stringify(e));let i=this.map_keys(e).reverse(),s=this.board.map((t=>[...t]));while(i.length>0){let e=i.pop(),o=e.neigh.map((t=>({row:this.key_positions[t].row,col:this.key_positions[t].col,original_key:t,original_label:this.key_labels[t],original_action:this.key_actions[t],key:e.key,label:e.label,neigh:this.key_neighbours[t],style:this.key_style[t].style,class:this.key_style[t].class,action:this.key_actions[t]})));if(void 0==s[e.row][e.col].key){let n=this.key_positions[e.key],l=this.key_positions[t(e.row,e.col)],r=Math.sqrt(Math.pow(n.row-l.row,2)+Math.pow(n.col-l.col,2));r<=2&&(s[e.row][e.col]={row:e.row,col:e.col,original_key:e.original_key,original_label:e.original_label,original_action:e.original_action,key:e.key,label:e.label,style:e.style,class:e.class,action:e.action},i.unshift(...o.reverse()))}}for(let c=0;c<s.length;c++)for(let e=0;e<s[c].length;e++){let i=s[c][e];if(void 0==i||void 0==i.key||void 0==i.label){let i=t(c,e);s[c][e]={row:c,col:e,original_key:i,original_label:this.key_labels[i],original_action:this.key_actions[i],key:i,label:this.key_labels[i],style:this.key_style[i].style,class:this.key_style[i].class,action:this.key_actions[i]}}}let o=["#ffe0de","#defffe","#e6ffde","#fffede","#f3e8ff","#fff4e8","#fae4ef","#f5ebc1","#f5aff7","#fcd666","#ffe6fa","#f7bea6","#fabaf5","#f4ccf8","#ccf5c5","#e5e4cb","#c02750","#f9166d","#e4f22c","#c68065","#40df8d","#68ce12","#9f7ab8","#945883","#8d9a11","#2af87e","#b58f6f","#5f35a3","#0ea4fb","#a8b289","#a17289","#fae4ef","#7497aa","#c5af37","#0cd666","#8f864a","#f7bea6","#9aba15","#647c58","#8c35b5","#45e49b","#c02750","#f9166d","#e4f22c","#c68065","#40df8d","#68ce12","#9f7ab8","#945883","#8d9a11","#2af87e","#b58f6f"],n=0,l=e.map((t=>{let e=[].concat(...s);return e.map((e=>e.key==t)).reduce(((t,e)=>t+e))})),r=l.map((t=>t>1&&o[n++])),a=this.zip(e,r);for(let c of s)for(let t of c)a[t.key]&&(t.style=`${t.style}; background-color: ${a[t.key]}`);Object.assign(this.boardView,s)},zip:function(t,e,i={}){return t.map(((t,s)=>{i[t]=e[s]})),i},reset:function(){this.inp="",this.text=""},map_keys:function(t){return t.filter((t=>Object.keys(this.key_neighbours).includes(t))).map((t=>({row:this.key_positions[t].row,col:this.key_positions[t].col,original_key:t,original_label:this.key_labels[t],original_action:this.key_actions[t],key:t,label:this.key_labels[t],neigh:this.key_neighbours[t],style:this.key_style[t].style,class:this.key_style[t].class,action:this.key_actions[t]})))},findSimilar:function(t){let e=this.wordsLeft;this.lettersLeft;e.size>0?this.leftWord=e[0]:this.leftWord="",e.size>1?this.rightWord=e[1]:this.rightWord=""}}});var u=i(2452),p=i(7518),w=i.n(p);y.render=h;const f=y;w()(y,"components",{QBtn:u.Z})},5827:(t,e,i)=>{i.d(e,{Z:()=>f});var s=i(3673),o=i(2323);const n={class:"kb-row",style:{}},l=["value"],r=["value"],a=["value"],c=["onMousedown","onMouseup","onMouseleave","onTouchstart","onTouchend","onTouchcancel"];function h(t,e,i,h,d,k){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",n,[(0,s._)("input",{class:"",style:{"background-color":"transparent","box-shadow":"none",border:"0"},type:"button",value:t.leftWord,onClick:e[0]||(e[0]=e=>t.insertWord(t.leftWord))},null,8,l),(0,s._)("input",{class:"",style:{"background-color":"transparent","box-shadow":"none",border:"0"},type:"button",value:t.inp,onClick:e[1]||(e[1]=()=>{t.$emit("wordpressed",t.inp),t.insertWord(t.inp)})},null,8,r),(0,s._)("input",{class:"",style:{"background-color":"transparent","box-shadow":"none",border:"0"},type:"button",value:t.rightWord,onClick:e[2]||(e[2]=e=>t.insertWord(t.rightWord))},null,8,a)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.boardView,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"kb-row"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:(0,o.C_)(["btn",[e.class,{original:e.original_show}]]),style:(0,o.j5)([{position:"relative"},e.style]),onMousedown:i=>t.original_mousedown(e),onMouseup:i=>t.original_mouseup(e),onMouseleave:i=>t.original_mouseleave(e),onTouchstart:i=>t.original_touchstart(e),onTouchend:i=>t.original_touchend(e),onTouchcancel:i=>t.original_touchcancel(e)},[(0,s.Uk)((0,o.zw)(e.original_label.toUpperCase())+" ",1),(0,s._)("div",{class:"btn-original",style:(0,o.j5)({display:e.key==e.original_key?"none":"block"})},(0,o.zw)(e.label.toUpperCase()),5)],46,c)))),128))])))),128))])}i(7386),i(71),i(7070);var d=i(3985);const k=i(52),y=(0,s.aZ)({name:"Keydrop",props:{modelValue:String},components:{},setup(){return{}},watch:{modelValue(t){let e=t.lastIndexOf(" "),i=(t.lastIndexOf("."),t.lastIndexOf(","),t.lastIndexOf("\n")),s=Math.max(i,e);-1==s?(this.internal_text="",this.internal_inp=t):s==t.length-1?(this.internal_text=t,this.internal_inp=""):(this.internal_text=t.substring(0,s+1),this.internal_inp=t.substring(s+1,t.length)),this.updateBoard()}},data(){return{internal_inp:"",words1:[],words2:[],words3:[],words4:[],wordsx:[],charmap1:[],charmap2:[],charmap3:[],charmap4:[],charmap5:[],internal_text:"",leftWord:"",rightWord:"",keys:{},boardView:[],tree:{},key_timeouts:{}}},computed:{fullText:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}},text:{get(){return this.internal_text},set(t){this.internal_text=t,this.fullText=this.internal_text+this.inp}},inp:{get(){return this.internal_inp},set(t){this.internal_inp=t,this.fullText=this.text+this.internal_inp}},words:function(){return void 0==this.inp||0==this.inp.length?this.words1:1==this.inp.length?this.words2:2==this.inp.length?this.words3:3==this.inp.length?this.words4:this.wordsx},row0:function(){return Object.fromEntries(Object.entries(this.keys).filter((([t,e])=>0==e.row)))},row1:function(){return Object.fromEntries(Object.entries(this.keys).filter((([t,e])=>1==e.row)))},row2:function(){return Object.fromEntries(Object.entries(this.keys).filter((([t,e])=>2==e.row)))},row3:function(){return Object.fromEntries(Object.entries(this.keys).filter((([t,e])=>3==e.row)))},wordsLeft:function(){if(this.inp.length<1)return new Set;let t=d.Z.findNext(this.words,this.inp,0,this.words.length);return t.words},lettersLeft:function(){const t=(t,e)=>{let i=t[e];return void 0==i||0==i.length?new Set:new Set(i)},e=e=>void 0==e||0==e.length?"q,w,e,r,t,y,u,i,o,p,l,k,j,h,g,f,d,s,a,z,x,c,v,b,n,m".split(","):1==e.length?t(this.charmap1,e):2==e.length?t(this.charmap2,e):3==e.length?t(this.charmap3,e):4==e.length?t(this.charmap4,e):5==e.length?t(this.charmap5,e):void console.log("No more");if(this.inp.length<1)return new Set;if(this.inp.length<4&&void 0!=this.words)return e(this.inp);if(void 0!=this.words){let t=d.Z.findNext(this.words,this.inp,0,this.words.length);return t.letters}return console.log("ERROR: something went wrong."),new Set}},created(){const t=(t,e)=>{k.get(e).then((e=>{Object.assign(t,e.data.split("\n")),this.updateBoard()}))},e=(t,e)=>{k.get(e).then((e=>{Object.assign(t,e.data),this.updateBoard()}))};e(this.charmap1,"mm1.json"),e(this.charmap2,"mm2.json"),e(this.charmap3,"mm3.json"),e(this.charmap4,"mm4.json"),e(this.charmap5,"mm5.json"),t(this.wordsx,"unigram_words_gt5.txt");this.board=[[{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0}],[{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0}],[{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0}],[{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0}]],this.key_positions={q:{row:0,col:0},w:{row:0,col:1},e:{row:0,col:2},r:{row:0,col:3},t:{row:0,col:4},y:{row:0,col:5},u:{row:0,col:6},i:{row:0,col:7},o:{row:0,col:8},p:{row:0,col:9},a:{row:1,col:0},s:{row:1,col:1},d:{row:1,col:2},f:{row:1,col:3},g:{row:1,col:4},h:{row:1,col:5},j:{row:1,col:6},k:{row:1,col:7},l:{row:1,col:8},shift:{row:2,col:0},z:{row:2,col:1},x:{row:2,col:2},c:{row:2,col:3},v:{row:2,col:4},b:{row:2,col:5},n:{row:2,col:6},m:{row:2,col:7},backspace:{row:2,col:8},numeric:{row:3,col:0},comma:{row:3,col:1},emoji:{row:3,col:2},space:{row:3,col:3},dot:{row:3,col:4},enter:{row:3,col:5}},this.key_neighbours={q:["w","a"],w:["q","a","s","e"],e:["w","s","d","r"],r:["e","d","f","t"],t:["r","f","g","y"],y:["t","g","h","u"],u:["y","h","j","i"],i:["u","j","k","o"],o:["i","k","l","p"],p:["o","l"],a:["q","w","s"],s:["a","w","e","d","z"],d:["s","e","r","f","x"],f:["d","r","t","g","c"],g:["f","t","y","h","v"],h:["g","y","u","j","b"],j:["h","u","i","k","n"],k:["j","i","o","l","m"],l:["k","o","p"],shift:[],z:["s","x"],x:["z","d","c"],c:["x","f","v"],v:["c","g","b"],b:["v","h","n"],n:["b","j","m"],m:["n","k"],backspace:[],numeric:[],comma:[],emoji:[],space:[],dot:[],enter:[]},this.key_style={q:{class:"btn-row1",style:""},w:{class:"btn-row1",style:""},e:{class:"btn-row1",style:""},r:{class:"btn-row1",style:""},t:{class:"btn-row1",style:""},y:{class:"btn-row1",style:""},u:{class:"btn-row1",style:""},i:{class:"btn-row1",style:""},o:{class:"btn-row1",style:""},p:{class:"btn-row1",style:""},a:{class:"btn-row2",style:"margin-left: 10pt;"},s:{class:"btn-row2",style:""},d:{class:"btn-row2",style:""},f:{class:"btn-row2",style:""},g:{class:"btn-row2",style:""},h:{class:"btn-row2",style:""},j:{class:"btn-row2",style:""},k:{class:"btn-row2",style:""},l:{class:"btn-row2",style:"margin-right: 10pt;"},shift:{class:"btn-shift",style:""},z:{class:"btn-row3",style:""},x:{class:"btn-row3",style:""},c:{class:"btn-row3",style:""},v:{class:"btn-row3",style:""},b:{class:"btn-row3",style:""},n:{class:"btn-row3",style:""},m:{class:"btn-row3",style:""},backspace:{class:"btn-shift",style:""},numeric:{class:"btn-shift",style:""},comma:{class:"btn-row4",style:""},emoji:{class:"btn-row4",style:""},space:{class:"btn-space",style:""},dot:{class:"btn-row4",style:""},enter:{class:"btn-shift",style:""}},this.key_labels={q:"q",w:"w",e:"e",r:"r",t:"t",y:"y",u:"u",i:"i",o:"o",p:"p",a:"a",s:"s",d:"d",f:"f",g:"g",h:"h",j:"j",k:"k",l:"l",shift:"⇧",z:"z",x:"x",c:"c",v:"v",b:"b",n:"n",m:"m",backspace:"⌫",numeric:"",comma:",",emoji:"🙂",space:"_",dot:".",enter:"⏎"},this.key_actions={q:this.keyFunWraper(this.keyClicked),w:this.keyFunWraper(this.keyClicked),e:this.keyFunWraper(this.keyClicked),r:this.keyFunWraper(this.keyClicked),t:this.keyFunWraper(this.keyClicked),y:this.keyFunWraper(this.keyClicked),u:this.keyFunWraper(this.keyClicked),i:this.keyFunWraper(this.keyClicked),o:this.keyFunWraper(this.keyClicked),p:this.keyFunWraper(this.keyClicked),a:this.keyFunWraper(this.keyClicked),s:this.keyFunWraper(this.keyClicked),d:this.keyFunWraper(this.keyClicked),f:this.keyFunWraper(this.keyClicked),g:this.keyFunWraper(this.keyClicked),h:this.keyFunWraper(this.keyClicked),j:this.keyFunWraper(this.keyClicked),k:this.keyFunWraper(this.keyClicked),l:this.keyFunWraper(this.keyClicked),shift:this.keyFunWraper(this.shiftClicked),z:this.keyFunWraper(this.keyClicked),x:this.keyFunWraper(this.keyClicked),c:this.keyFunWraper(this.keyClicked),v:this.keyFunWraper(this.keyClicked),b:this.keyFunWraper(this.keyClicked),n:this.keyFunWraper(this.keyClicked),m:this.keyFunWraper(this.keyClicked),backspace:this.keyFunWraper(this.backspaceClicked),numeric:this.keyFunWraper(this.numClicked),comma:this.keyFunWraper(this.commaClicked),emoji:this.keyFunWraper(this.keyClicked),space:this.keyFunWraper(this.spaceClicked),dot:this.keyFunWraper(this.dotClicked),enter:this.keyFunWraper(this.enterClicked)},this.standard_keys=["shift","backspace","numeric","comma","emoji","space","dot","enter"]},mounted(){this.updateBoard()},methods:{original_leave:function(t){t.original_show=!1,clearTimeout(this.key_timeouts[t])},original_down:function(t){t.key!=t.original_key?this.key_timeouts[t]=setTimeout((()=>{t.original_show=!0}),500):"backspace"==t.key&&(this.key_timeouts[t]=setTimeout((()=>{this.key_timeouts[t]=setInterval((()=>{this.backspaceClicked(t)}),50)}),500))},original_up:function(t){t.original_show?t.original_action(Object.assign(Object.assign({},t),{label:t.original_label,key:t.original_key,action:t.original_action})):("backspace"==t.key&&clearTimeout(this.key_timeouts[t]),t.action(t))},original_mouseleave:function(t){if(this.$q.platform.is.mobile)return!1;this.original_leave(t)},original_mousedown:function(t){if(this.$q.platform.is.mobile)return!1;this.original_down(t)},original_mouseup:function(t){if(this.$q.platform.is.mobile)return!1;this.original_up(t)},original_touchstart:function(t){this.original_down(t)},original_touchend:function(t){this.original_up(t)},original_touchcancel:function(t){this.original_leave(t)},showNotSupported:function(){this.$q.notify({type:"info",timeout:100,message:"Not supported"})},shiftClicked:function(t){this.showNotSupported()},numClicked:function(t){this.showNotSupported()},spaceClicked:function(t){this.insertWord(this.inp)},dotClicked:function(t){this.insertWord(this.inp+".")},commaClicked:function(t){this.insertWord(this.inp+",")},enterClicked:function(t){this.insertWord(this.inp,"\n")},keyFunWraper:function(t){return e=>{t(e),this.$emit("keypressed",e)}},backspaceClicked:function(t){if(this.inp.length>0)this.inp=this.inp.substring(0,this.inp.length-1),this.updateBoard();else{" "!=this.text[this.text.length-1]&&"."!=this.text[this.text.length-1]&&","!=this.text[this.text.length-1]&&"\n"!=this.text[this.text.length-1]||(this.text=this.text.substring(0,this.text.length-1));let t=this.text.split(" "),e=t.length;this.text=e>1?t.slice(0,e-1).join(" ")+" ":"",this.inp=t[e-1]}},keyClicked:function(t){this.inp=this.inp+t.label,this.updateBoard()},insertWord:function(t,e=" "){this.text+=t+e,this.inp="",this.rightWord="",this.leftWord="",this.updateBoard()},updateBoard:function(){let t=(t,e)=>{for(let i in this.key_positions){let s=this.key_positions[i].row,o=this.key_positions[i].col;if(s==t&&o==e)return i}throw"ERROR: cannot find"},e=Array.from(this.lettersLeft).concat(this.standard_keys);this.lettersLeft.size<1?e=Object.keys(this.key_neighbours):1==this.lettersLeft.size&&console.log(JSON.stringify(e));let i=this.map_keys(e).reverse(),s=this.board.map((t=>[...t]));while(i.length>0){let e=i.pop(),o=e.neigh.map((t=>({row:this.key_positions[t].row,col:this.key_positions[t].col,original_key:t,original_label:this.key_labels[t],original_action:this.key_actions[t],key:e.key,label:e.label,neigh:this.key_neighbours[t],style:this.key_style[t].style,class:this.key_style[t].class,action:this.key_actions[t]})));if(void 0==s[e.row][e.col].key){let n=this.key_positions[e.key],l=this.key_positions[t(e.row,e.col)],r=Math.sqrt(Math.pow(n.row-l.row,2)+Math.pow(n.col-l.col,2));r<=2&&(s[e.row][e.col]={row:e.row,col:e.col,original_key:e.original_key,original_label:e.original_label,original_action:e.original_action,key:e.key,label:e.label,style:e.style,class:e.class,action:e.action},i.unshift(...o.reverse()))}}for(let c=0;c<s.length;c++)for(let e=0;e<s[c].length;e++){let i=s[c][e];if(void 0==i||void 0==i.key||void 0==i.label){let i=t(c,e);s[c][e]={row:c,col:e,original_key:i,original_label:this.key_labels[i],original_action:this.key_actions[i],key:i,label:this.key_labels[i],style:this.key_style[i].style,class:this.key_style[i].class,action:this.key_actions[i]}}}let o=["#ffe0de","#defffe","#e6ffde","#fffede","#f3e8ff","#fff4e8","#fae4ef","#f5ebc1","#f5aff7","#fcd666","#ffe6fa","#f7bea6","#fabaf5","#f4ccf8","#ccf5c5","#e5e4cb","#c02750","#f9166d","#e4f22c","#c68065","#40df8d","#68ce12","#9f7ab8","#945883","#8d9a11","#2af87e","#b58f6f","#5f35a3","#0ea4fb","#a8b289","#a17289","#fae4ef","#7497aa","#c5af37","#0cd666","#8f864a","#f7bea6","#9aba15","#647c58","#8c35b5","#45e49b","#c02750","#f9166d","#e4f22c","#c68065","#40df8d","#68ce12","#9f7ab8","#945883","#8d9a11","#2af87e","#b58f6f"],n=0,l=e.map((t=>{let e=[].concat(...s);return e.map((e=>e.key==t)).reduce(((t,e)=>t+e))})),r=l.map((t=>t>1&&o[n++])),a=this.zip(e,r);for(let c of s)for(let t of c)a[t.key]&&(t.style=`${t.style}; background-color: ${a[t.key]}`);Object.assign(this.boardView,s)},zip:function(t,e,i={}){return t.map(((t,s)=>{i[t]=e[s]})),i},reset:function(){this.inp="",this.text=""},map_keys:function(t){return t.filter((t=>Object.keys(this.key_neighbours).includes(t))).map((t=>({row:this.key_positions[t].row,col:this.key_positions[t].col,original_key:t,original_label:this.key_labels[t],original_action:this.key_actions[t],key:t,label:this.key_labels[t],neigh:this.key_neighbours[t],style:this.key_style[t].style,class:this.key_style[t].class,action:this.key_actions[t]})))},findSimilar:function(t){let e=this.wordsLeft;this.lettersLeft;e.size>0?this.leftWord=e[0]:this.leftWord="",e.size>1?this.rightWord=e[1]:this.rightWord=""}}});var u=i(2452),p=i(7518),w=i.n(p);y.render=h;const f=y;w()(y,"components",{QBtn:u.Z})},3054:(t,e,i)=>{i.d(e,{Z:()=>k});var s=i(3673),o=i(2323);const n={class:"kb-row",style:{}},l=["value"],r=["value"],a=["value"],c=["onMousedown","onMouseup","onMouseleave","onTouchstart","onTouchend","onTouchcancel"];function h(t,e,i,h,d,k){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",n,[(0,s._)("input",{class:"",style:{"background-color":"transparent","box-shadow":"none",border:"0"},type:"button",value:t.leftWord,onClick:e[0]||(e[0]=e=>t.insertWord(t.leftWord))},null,8,l),(0,s._)("input",{class:"",style:{"background-color":"transparent","box-shadow":"none",border:"0"},type:"button",value:t.inp,onClick:e[1]||(e[1]=()=>{t.$emit("wordpressed",t.inp),t.insertWord(t.inp)})},null,8,r),(0,s._)("input",{class:"",style:{"background-color":"transparent","box-shadow":"none",border:"0"},type:"button",value:t.rightWord,onClick:e[2]||(e[2]=e=>t.insertWord(t.rightWord))},null,8,a)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.boardView,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"kb-row"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:(0,o.C_)(["btn",[e.class,{original:e.original_show}]]),style:(0,o.j5)([{position:"relative"},e.style]),onMousedown:i=>t.original_mousedown(e),onMouseup:i=>t.original_mouseup(e),onMouseleave:i=>t.original_mouseleave(e),onTouchstart:i=>t.original_touchstart(e),onTouchend:i=>t.original_touchend(e),onTouchcancel:i=>t.original_touchcancel(e)},[(0,s.Uk)((0,o.zw)(e.label.toUpperCase())+" ",1),(0,s._)("div",{class:"btn-original",style:(0,o.j5)({display:e.key==e.original_key?"none":"block"})},(0,o.zw)(e.original_label),5)],46,c)))),128))])))),128))])}i(7386),i(71),i(7070),i(3985);i(52);const d=(0,s.aZ)({name:"Keyboard",props:{modelValue:String},components:{},setup(){return{}},watch:{modelValue(t){let e=t.lastIndexOf(" "),i=(t.lastIndexOf("."),t.lastIndexOf(","),t.lastIndexOf("\n")),s=Math.max(i,e);-1==s?(this.internal_text="",this.internal_inp=t):s==t.length-1?this.internal_text=t:(this.internal_text=t.substring(0,s+1),this.internal_inp=t.substring(s+1,t.length)),this.updateBoard()}},data(){return{internal_inp:"",internal_text:"",leftWord:"",rightWord:"",keys:{},boardView:[],tree:{},key_timeouts:{}}},computed:{fullText:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}},text:{get(){return this.internal_text},set(t){this.internal_text=t,this.fullText=this.internal_text+this.inp}},inp:{get(){return this.internal_inp},set(t){this.internal_inp=t,this.fullText=this.text+this.internal_inp}},row0:function(){return Object.fromEntries(Object.entries(this.keys).filter((([t,e])=>0==e.row)))},row1:function(){return Object.fromEntries(Object.entries(this.keys).filter((([t,e])=>1==e.row)))},row2:function(){return Object.fromEntries(Object.entries(this.keys).filter((([t,e])=>2==e.row)))},row3:function(){return Object.fromEntries(Object.entries(this.keys).filter((([t,e])=>3==e.row)))}},created(){this.board=[[{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0}],[{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0}],[{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0}],[{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0}]],this.key_positions={q:{row:0,col:0},w:{row:0,col:1},e:{row:0,col:2},r:{row:0,col:3},t:{row:0,col:4},y:{row:0,col:5},u:{row:0,col:6},i:{row:0,col:7},o:{row:0,col:8},p:{row:0,col:9},a:{row:1,col:0},s:{row:1,col:1},d:{row:1,col:2},f:{row:1,col:3},g:{row:1,col:4},h:{row:1,col:5},j:{row:1,col:6},k:{row:1,col:7},l:{row:1,col:8},shift:{row:2,col:0},z:{row:2,col:1},x:{row:2,col:2},c:{row:2,col:3},v:{row:2,col:4},b:{row:2,col:5},n:{row:2,col:6},m:{row:2,col:7},backspace:{row:2,col:8},numeric:{row:3,col:0},comma:{row:3,col:1},emoji:{row:3,col:2},space:{row:3,col:3},dot:{row:3,col:4},enter:{row:3,col:5}},this.key_style={q:{class:"btn-row1",style:""},w:{class:"btn-row1",style:""},e:{class:"btn-row1",style:""},r:{class:"btn-row1",style:""},t:{class:"btn-row1",style:""},y:{class:"btn-row1",style:""},u:{class:"btn-row1",style:""},i:{class:"btn-row1",style:""},o:{class:"btn-row1",style:""},p:{class:"btn-row1",style:""},a:{class:"btn-row2",style:"margin-left: 10pt;"},s:{class:"btn-row2",style:""},d:{class:"btn-row2",style:""},f:{class:"btn-row2",style:""},g:{class:"btn-row2",style:""},h:{class:"btn-row2",style:""},j:{class:"btn-row2",style:""},k:{class:"btn-row2",style:""},l:{class:"btn-row2",style:"margin-right: 10pt;"},shift:{class:"btn-shift",style:""},z:{class:"btn-row3",style:""},x:{class:"btn-row3",style:""},c:{class:"btn-row3",style:""},v:{class:"btn-row3",style:""},b:{class:"btn-row3",style:""},n:{class:"btn-row3",style:""},m:{class:"btn-row3",style:""},backspace:{class:"btn-shift",style:""},numeric:{class:"btn-shift",style:""},comma:{class:"btn-row4",style:""},emoji:{class:"btn-row4",style:""},space:{class:"btn-space",style:""},dot:{class:"btn-row4",style:""},enter:{class:"btn-shift",style:""}},this.key_labels={q:"q",w:"w",e:"e",r:"r",t:"t",y:"y",u:"u",i:"i",o:"o",p:"p",a:"a",s:"s",d:"d",f:"f",g:"g",h:"h",j:"j",k:"k",l:"l",shift:"⇧",z:"z",x:"x",c:"c",v:"v",b:"b",n:"n",m:"m",backspace:"⌫",numeric:"",comma:",",emoji:"🙂",space:"_",dot:".",enter:"⏎"},this.key_actions={q:this.keyFunWraper(this.keyClicked),w:this.keyFunWraper(this.keyClicked),e:this.keyFunWraper(this.keyClicked),r:this.keyFunWraper(this.keyClicked),t:this.keyFunWraper(this.keyClicked),y:this.keyFunWraper(this.keyClicked),u:this.keyFunWraper(this.keyClicked),i:this.keyFunWraper(this.keyClicked),o:this.keyFunWraper(this.keyClicked),p:this.keyFunWraper(this.keyClicked),a:this.keyFunWraper(this.keyClicked),s:this.keyFunWraper(this.keyClicked),d:this.keyFunWraper(this.keyClicked),f:this.keyFunWraper(this.keyClicked),g:this.keyFunWraper(this.keyClicked),h:this.keyFunWraper(this.keyClicked),j:this.keyFunWraper(this.keyClicked),k:this.keyFunWraper(this.keyClicked),l:this.keyFunWraper(this.keyClicked),shift:this.keyFunWraper(this.shiftClicked),z:this.keyFunWraper(this.keyClicked),x:this.keyFunWraper(this.keyClicked),c:this.keyFunWraper(this.keyClicked),v:this.keyFunWraper(this.keyClicked),b:this.keyFunWraper(this.keyClicked),n:this.keyFunWraper(this.keyClicked),m:this.keyFunWraper(this.keyClicked),backspace:this.keyFunWraper(this.backspaceClicked),numeric:this.keyFunWraper(this.numClicked),comma:this.keyFunWraper(this.commaClicked),emoji:this.keyFunWraper(this.keyClicked),space:this.keyFunWraper(this.spaceClicked),dot:this.keyFunWraper(this.dotClicked),enter:this.keyFunWraper(this.enterClicked)},this.standard_keys=["shift","backspace","numeric","comma","emoji","space","dot","enter"]},mounted(){this.updateBoard()},methods:{original_leave:function(t){t.original_show=!1,clearTimeout(this.key_timeouts[t])},original_down:function(t){t.key!=t.original_key?this.key_timeouts[t]=setTimeout((()=>{t.original_show=!0}),500):"backspace"==t.key&&(this.key_timeouts[t]=setTimeout((()=>{this.key_timeouts[t]=setInterval((()=>{this.backspaceClicked(t)}),50)}),500))},original_up:function(t){t.original_show?t.original_action(Object.assign(Object.assign({},t),{label:t.original_label,key:t.original_key,action:t.original_action})):("backspace"==t.key&&clearTimeout(this.key_timeouts[t]),t.action(t))},original_mouseleave:function(t){if(this.$q.platform.is.mobile)return!1;this.original_leave(t)},original_mousedown:function(t){if(this.$q.platform.is.mobile)return!1;this.original_down(t)},original_mouseup:function(t){if(this.$q.platform.is.mobile)return!1;this.original_up(t)},original_touchstart:function(t){this.original_down(t)},original_touchend:function(t){this.original_up(t)},original_touchcancel:function(t){this.original_leave(t)},showNotSupported:function(){this.$q.notify({type:"info",timeout:100,message:"Not supported"})},shiftClicked:function(t){this.showNotSupported()},numClicked:function(t){this.showNotSupported()},spaceClicked:function(t){this.insertWord(this.inp)},dotClicked:function(t){this.insertWord(this.inp+".")},commaClicked:function(t){this.insertWord(this.inp+",")},enterClicked:function(t){this.insertWord(this.inp,"\n")},keyFunWraper:function(t){return e=>{t(e),this.$emit("keypressed",e)}},backspaceClicked:function(t){if(this.inp.length>0)this.inp=this.inp.substring(0,this.inp.length-1),this.updateBoard();else{" "!=this.text[this.text.length-1]&&"."!=this.text[this.text.length-1]&&","!=this.text[this.text.length-1]&&"\n"!=this.text[this.text.length-1]||(this.text=this.text.substring(0,this.text.length-1));let t=this.text.split(" "),e=t.length;this.text=e>1?t.slice(0,e-1).join(" ")+" ":"",this.inp=t[e-1]}},keyClicked:function(t){this.inp=this.inp+t.label,this.updateBoard()},insertWord:function(t,e=" "){this.text+=t+e,this.inp="",this.rightWord="",this.leftWord="",this.updateBoard()},updateBoard:function(){let t=(t,e)=>{for(let i in this.key_positions){let s=this.key_positions[i].row,o=this.key_positions[i].col;if(s==t&&o==e)return i}throw"ERROR: cannot find"},e=Object.keys(this.key_actions),i=(this.map_keys(e).reverse(),this.board.map((t=>[...t])));for(let s=0;s<i.length;s++)for(let e=0;e<i[s].length;e++){let o=i[s][e];if(void 0==o||void 0==o.key||void 0==o.label){let o=t(s,e);i[s][e]={row:s,col:e,original_key:o,original_label:this.key_labels[o],original_action:this.key_actions[o],key:o,label:this.key_labels[o],style:this.key_style[o].style,class:this.key_style[o].class,action:this.key_actions[o]}}}Object.assign(this.boardView,i)},zip:function(t,e,i={}){return t.map(((t,s)=>{i[t]=e[s]})),i},reset:function(){this.inp="",this.text=""},map_keys:function(t){return t.map((t=>({row:this.key_positions[t].row,col:this.key_positions[t].col,original_key:t,original_label:this.key_labels[t],original_action:this.key_actions[t],key:t,label:this.key_labels[t],style:this.key_style[t].style,class:this.key_style[t].class,action:this.key_actions[t]})))},findSimilar:function(t){let e=this.wordsLeft;this.lettersLeft;e.size>0?this.leftWord=e[0]:this.leftWord="",e.size>1?this.rightWord=e[1]:this.rightWord=""}}});d.render=h;const k=d}}]);