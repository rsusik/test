"use strict";(self["webpackChunkkeydrop"]=self["webpackChunkkeydrop"]||[]).push([[819],{9819:(e,t,s)=>{s.r(t),s.d(t,{default:()=>W});var o=s(3673);const n={class:"text-primary q-py-none q-my-none"},r={class:"top-controls"},a={class:"absolute-full flex flex-center"},i=(0,o.Uk)(" This is a demo. The timing and progress is at the top of the screen. The keyboard is at the bottom of the screen. The aim of the test is to write the text as fast as possible. "),l=(0,o.Uk)(" Congratulation! You finished the demo. You can still exercise or leave the demo and start tests. "),d={key:2},c=(0,o._)("div",{class:"is-error"},[(0,o._)("div",{class:"counter",style:{color:"red"}}," ! ")],-1),h=[c];function u(e,t,s,c,u,m){const p=(0,o.up)("q-btn"),g=(0,o.up)("q-badge"),f=(0,o.up)("q-linear-progress"),y=(0,o.up)("q-card-section"),b=(0,o.up)("q-card"),w=(0,o.up)("q-icon"),v=(0,o.up)("q-banner"),k=(0,o.up)("q-page-container"),q=(0,o.up)("KeydropKeyboard"),x=(0,o.up)("NormalKeyboard"),T=(0,o.up)("q-toolbar-title"),C=(0,o.up)("q-toolbar"),_=(0,o.up)("q-footer"),K=(0,o.up)("q-layout");return(0,o.wg)(),(0,o.j4)(K,{view:"hHh lpR fFf"},{default:(0,o.w5)((()=>[(0,o._)("div",n,[(0,o.Wm)(p,{flat:"",dense:"",icon:"arrow_back",label:"Back",to:"/"})]),(0,o.Wm)(k,{class:"q-px-md q-pt-none q-mt-none"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o._)("div",r,[(0,o.Wm)(f,{size:"30px",value:e.sentenceProgress,color:"accent",class:"q-mt-sm"},{default:(0,o.w5)((()=>[(0,o._)("div",a,[(0,o.Wm)(g,{color:"white","text-color":"accent",label:e.sentenceProgressLabel},null,8,["label"])])])),_:1},8,["value"])]),(0,o.Wm)(b,{flat:"",bordered:""},{default:(0,o.w5)((()=>[e.sentence&&e.sentence.length>0?((0,o.wg)(),(0,o.j4)(y,{key:0,style:{"font-size":"1.6em"},innerHTML:e.sentenceDisp},null,8,["innerHTML"])):(0,o.kq)("",!0)])),_:1})]),e.gameFinished?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(v,{key:0,class:"q-mx-md q-my-md bg-primary text-white rounded-borders"},{avatar:(0,o.w5)((()=>[(0,o.Wm)(w,{name:"info",color:"white"})])),default:(0,o.w5)((()=>[i])),_:1})),e.gameFinished?((0,o.wg)(),(0,o.j4)(v,{key:1,class:"q-mx-md q-my-md bg-secondary text-white rounded-borders"},{avatar:(0,o.w5)((()=>[(0,o.Wm)(w,{name:"task_alt",color:"white"})])),default:(0,o.w5)((()=>[l])),_:1})):(0,o.kq)("",!0),e.isError?((0,o.wg)(),(0,o.iD)("div",d,h)):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(_,{class:"footer"},{default:(0,o.w5)((()=>[(0,o.Wm)(C,null,{default:(0,o.w5)((()=>[(0,o.Wm)(T,null,{default:(0,o.w5)((()=>["keydrop"==e.gamemode?((0,o.wg)(),(0,o.j4)(q,{key:0,ref:"keydropKeyboard",modelValue:e.text,"onUpdate:modelValue":t[0]||(t[0]=t=>e.text=t),onKeypressed:t[1]||(t[1]=t=>e.logKey(t)),onWordpressed:t[2]||(t[2]=t=>e.logWord(t))},null,8,["modelValue"])):((0,o.wg)(),(0,o.j4)(x,{key:1,ref:"normalKeyboard",modelValue:e.text,"onUpdate:modelValue":t[3]||(t[3]=t=>e.text=t),onKeypressed:t[4]||(t[4]=t=>e.logKey(t)),onWordpressed:t[5]||(t[5]=t=>e.logWord(t))},null,8,["modelValue"]))])),_:1})])),_:1})])),_:1})])),_:1})}s(71),s(3985);var m=s(2229),p=s(2788);s(52);const g=(0,o.aZ)({name:"MainLayout",components:{KeydropKeyboard:m.Z,NormalKeyboard:p.Z},setup(){return{}},data(){return{text:"",refreshControlsInterval:void 0,sentenceTimeStart:0,sentenceTimeStop:0,sentenceTimeElapsed:0,gameFinished:!1,sentence:void 0,gamemode:void 0}},computed:{viewportHeight:function(){return this.$q.screen.height-this.getFooterSize()},sentenceProgressLabel:function(){return"Test (demo) progress: ðŸ•‘ "+this.sentenceTimeDisp+"s | "+(100*this.sentenceProgress).toFixed(0)+"%"},sentenceProgress:function(){return this.sentence?this.correctCharacters()/this.sentence.length:0},sentenceTimeDisp:function(){return this.sentenceTimeElapsed?this.sentenceTimeElapsed.toFixed(1):0},isError:function(){return this.correctCharacters()<this.text.length},sentenceDisp:function(){let e=this.sentence.toLowerCase(),t=this.text.toLowerCase(),s='<span style="color:black; background-color:lightgreen;">',o=this.correctCharacters();return s+=e.substr(0,o)+"</span>",o<t.length&&(s+='<span style="background-color:red">'+e.substr(o,t.length-o)+"</span>",o=t.length),s+='<span style="color:#aaa">'+e.substr(o,e.length-o)+"</span>",s}},deactivated(){},unmounted(){console.log("unmounted"),this.resetState()},created(){var e;this.gamemode=null!==(e=this.$route.params.mode)&&void 0!==e?e:"keydrop",this.sentence="the timing and progress is at the top and the keyboard is at the bottom of the screen and the aim of the test is to write the text as fast as possible",this.sentenceTimeStart=void 0,this.sentenceTimeStop=void 0,this.sentenceTimeElapsed=0,this.gameFinished=!1,this.gameStart()},mounted(){},methods:{correctCharacters:function(){if(void 0==this.sentence||void 0==this.text)return 0;let e=this.sentence.toLowerCase(),t=this.text.toLowerCase(),s=0;while(e[s]==t[s]&&s<e.length&&s<t.length)s++;return s},resetKeyboard:function(){for(let e of[this.$refs.keyboard,this.$refs.keydropKeyboard,this.$refs.normalKeyboard])void 0!=e&&e.reset()},refreshControls:function(){this.sentenceTimeElapsed=(Date.now()-this.sentenceTimeStart)/1e3,this.testTimeElapsed=(Date.now()-this.gameTimeStart)/1e3},logKey:function(e){this.text.toLowerCase()==this.sentence.toLowerCase()&&(this.gameFinished=!0,this.resetState(),this.gameStart())},resetState:function(){clearInterval(this.refreshControlsInterval)},gameStart:function(){this.text="",this.sentenceTimeStart=Date.now(),this.refreshControlsInterval=setInterval((()=>{this.refreshControls()}),100)},getFooterSize:function(){return document.getElementsByClassName("q-footer")[0].getBoundingClientRect().height}}});var f=s(3066),y=s(3187),b=s(2652),w=s(1598),v=s(9721),k=s(151),q=s(5589),x=s(5607),T=s(4554),C=s(1762),_=s(9570),K=s(3747),S=s(7518),Z=s.n(S);g.render=u;const W=g;Z()(g,"components",{QLayout:f.Z,QBtn:y.Z,QPageContainer:b.Z,QLinearProgress:w.Z,QBadge:v.Z,QCard:k.Z,QCardSection:q.Z,QBanner:x.Z,QIcon:T.Z,QFooter:C.Z,QToolbar:_.Z,QToolbarTitle:K.Z})}}]);