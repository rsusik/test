"use strict";(self["webpackChunkkeydrop"]=self["webpackChunkkeydrop"]||[]).push([[832],{5832:(t,e,i)=>{i.r(e),i.d(e,{default:()=>O});var s=i(3673);const o=(0,s.Uk)(" Type text using below keyboard ");function n(t,e,i,n,l,r){const a=(0,s.up)("q-btn"),h=(0,s.up)("q-toolbar"),c=(0,s.up)("q-card-section"),d=(0,s.up)("q-card"),y=(0,s.up)("q-page-container"),k=(0,s.up)("KeydropKeyboard2"),u=(0,s.up)("q-toolbar-title"),p=(0,s.up)("q-footer"),f=(0,s.up)("q-layout");return(0,s.wg)(),(0,s.j4)(f,{view:"hHh lpR fFf"},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{class:"text-primary"},{default:(0,s.w5)((()=>[(0,s.Wm)(a,{flat:"",dense:"",icon:"arrow_back",label:"Back",to:"/"})])),_:1}),(0,s.Wm)(y,{class:"q-pa-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{flat:"",bordered:""},{default:(0,s.w5)((()=>[""==t.text?((0,s.wg)(),(0,s.j4)(c,{key:0,class:"text-grey"},{default:(0,s.w5)((()=>[o])),_:1})):(0,s.kq)("",!0),t.displayText.length>0?((0,s.wg)(),(0,s.j4)(c,{key:1,innerHTML:t.displayText},null,8,["innerHTML"])):(0,s.kq)("",!0)])),_:1})])),_:1}),(0,s.Wm)(p,{class:"footer"},{default:(0,s.w5)((()=>[(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Wm)(k,{modelValue:t.text,"onUpdate:modelValue":e[0]||(e[0]=e=>t.text=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})}i(5363);var l=i(3985),r=i(2323);const a={class:"kb-container"},h={class:"kb-row kb-row-first"},c=["value"],d=["value"],y=["value"],k=["onMousedown","onMouseup","onMouseleave","onTouchstart","onTouchend","onTouchcancel"];function u(t,e,i,o,n,l){return(0,s.wg)(),(0,s.iD)("div",a,[(0,s._)("div",h,[(0,s._)("input",{class:"",style:{"background-color":"transparent","box-shadow":"none",border:"0"},type:"button",value:t.leftWord,onClick:e[0]||(e[0]=e=>t.insertWord(t.leftWord))},null,8,c),(0,s._)("input",{class:"",style:{"background-color":"transparent","box-shadow":"none",border:"0"},type:"button",value:t.inp,onClick:e[1]||(e[1]=()=>{t.$emit("wordpressed",t.inp),t.insertWord(t.inp)})},null,8,d),(0,s._)("input",{class:"",style:{"background-color":"transparent","box-shadow":"none",border:"0"},type:"button",value:t.rightWord,onClick:e[2]||(e[2]=e=>t.insertWord(t.rightWord))},null,8,y)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.boardView,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"kb-row"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:(0,r.C_)(["btn",[e.class,{original:e.original_show}]]),style:(0,r.j5)([{position:"relative"},e.style]),onMousedown:i=>t.original_mousedown(e),onMouseup:i=>t.original_mouseup(e),onMouseleave:i=>t.original_mouseleave(e),onTouchstart:i=>t.original_touchstart(e),onTouchend:i=>t.original_touchend(e),onTouchcancel:i=>t.original_touchcancel(e)},[(0,s._)("div",null,(0,r.zw)(e.label.toUpperCase()),1),(0,s._)("div",{class:"btn-original",style:(0,r.j5)({display:e.key==e.original_key?"none":"block"})},(0,r.zw)(e.original_label.toUpperCase()),5)],46,k)))),128))])))),128))])}i(7386),i(71),i(7070);const p=i(52),f=(0,s.aZ)({name:"KeydropKeyboard",props:{modelValue:String},components:{},setup(){return{}},watch:{modelValue(t){let e=t.lastIndexOf(" "),i=(t.lastIndexOf("."),t.lastIndexOf(","),t.lastIndexOf("\n")),s=Math.max(i,e);-1==s?(this.internal_text="",this.internal_inp=t):s==t.length-1?(this.internal_text=t,this.internal_inp=""):(this.internal_text=t.substring(0,s+1),this.internal_inp=t.substring(s+1,t.length)),this.updateBoard()}},data(){return{internal_inp:"",words1:[],words2:[],words3:[],words4:[],wordsx:[],charmap1:[],charmap2:[],charmap3:[],charmap4:[],charmap5:[],internal_text:"",leftWord:"",rightWord:"",keys:{},boardView:[],tree:{},key_timeouts:{}}},computed:{fullText:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}},text:{get(){return this.internal_text},set(t){this.internal_text=t,this.fullText=this.internal_text+this.inp}},inp:{get(){return this.internal_inp},set(t){this.internal_inp=t,this.fullText=this.text+this.internal_inp}},words:function(){return void 0==this.inp||0==this.inp.length?this.words1:1==this.inp.length?this.words2:2==this.inp.length?this.words3:3==this.inp.length?this.words4:this.wordsx},row0:function(){return Object.fromEntries(Object.entries(this.keys).filter((([t,e])=>0==e.row)))},row1:function(){return Object.fromEntries(Object.entries(this.keys).filter((([t,e])=>1==e.row)))},row2:function(){return Object.fromEntries(Object.entries(this.keys).filter((([t,e])=>2==e.row)))},row3:function(){return Object.fromEntries(Object.entries(this.keys).filter((([t,e])=>3==e.row)))},wordsLeft:function(){if(this.inp.length<1)return new Set;let t=l.Z.findNext(this.words,this.inp,0,this.words.length);return t.words},lettersLeft:function(){const t=(t,e)=>{let i=t[e];return void 0==i||0==i.length?new Set:new Set(i)},e=e=>void 0==e||0==e.length?"q,w,e,r,t,y,u,i,o,p,l,k,j,h,g,f,d,s,a,z,x,c,v,b,n,m".split(","):1==e.length?t(this.charmap1,e):2==e.length?t(this.charmap2,e):3==e.length?t(this.charmap3,e):4==e.length?t(this.charmap4,e):5==e.length?t(this.charmap5,e):void console.log("No more");if(this.inp.length<1)return new Set;if(this.inp.length<4&&void 0!=this.words)return e(this.inp);if(void 0!=this.words){let t=l.Z.findNext(this.words,this.inp,0,this.words.length);return t.letters}return console.log("ERROR: something went wrong."),new Set}},created(){const t=(t,e)=>{p.get(e).then((e=>{Object.assign(t,e.data.split("\n")),this.updateBoard()}))},e=(t,e)=>{p.get(e).then((e=>{Object.assign(t,e.data),this.updateBoard()}))};e(this.charmap1,"mm1.json"),e(this.charmap2,"mm2.json"),e(this.charmap3,"mm3.json"),t(this.wordsx,"unigram_words_gt5.txt");this.board=[[{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0}],[{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0}],[{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0}],[{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0},{key:void 0}]],this.key_positions={q:{row:0,col:0},w:{row:0,col:1},e:{row:0,col:2},r:{row:0,col:3},t:{row:0,col:4},y:{row:0,col:5},u:{row:0,col:6},i:{row:0,col:7},o:{row:0,col:8},p:{row:0,col:9},a:{row:1,col:0},s:{row:1,col:1},d:{row:1,col:2},f:{row:1,col:3},g:{row:1,col:4},h:{row:1,col:5},j:{row:1,col:6},k:{row:1,col:7},l:{row:1,col:8},shift:{row:2,col:0},z:{row:2,col:1},x:{row:2,col:2},c:{row:2,col:3},v:{row:2,col:4},b:{row:2,col:5},n:{row:2,col:6},m:{row:2,col:7},backspace:{row:2,col:8},numeric:{row:3,col:0},",":{row:3,col:1},emoji:{row:3,col:2}," ":{row:3,col:3},".":{row:3,col:4},"\n":{row:3,col:5}},this.key_neighbors={q:["w","a"],w:["q","a","s","e"],e:["w","s","d","r"],r:["e","d","f","t"],t:["r","f","g","y"],y:["t","g","h","u"],u:["y","h","j","i"],i:["u","j","k","o"],o:["i","k","l","p"],p:["o","l"],a:["q","w","s"],s:["a","w","e","d","z"],d:["s","e","r","f","x"],f:["d","r","t","g","c"],g:["f","t","y","h","v"],h:["g","y","u","j","b"],j:["h","u","i","k","n"],k:["j","i","o","l","m"],l:["k","o","p"],shift:[],z:["s","x"],x:["z","d","c"],c:["x","f","v"],v:["c","g","b"],b:["v","h","n"],n:["b","j","m"],m:["n","k"],backspace:[],numeric:[],",":[],emoji:[]," ":[],".":[],"\n":[]},this.key_style={q:{class:"btn-row1",style:""},w:{class:"btn-row1",style:""},e:{class:"btn-row1",style:""},r:{class:"btn-row1",style:""},t:{class:"btn-row1",style:""},y:{class:"btn-row1",style:""},u:{class:"btn-row1",style:""},i:{class:"btn-row1",style:""},o:{class:"btn-row1",style:""},p:{class:"btn-row1",style:""},a:{class:"btn-row2",style:"margin-left: 10pt;"},s:{class:"btn-row2",style:""},d:{class:"btn-row2",style:""},f:{class:"btn-row2",style:""},g:{class:"btn-row2",style:""},h:{class:"btn-row2",style:""},j:{class:"btn-row2",style:""},k:{class:"btn-row2",style:""},l:{class:"btn-row2",style:"margin-right: 10pt;"},shift:{class:"btn-shift",style:""},z:{class:"btn-row3",style:""},x:{class:"btn-row3",style:""},c:{class:"btn-row3",style:""},v:{class:"btn-row3",style:""},b:{class:"btn-row3",style:""},n:{class:"btn-row3",style:""},m:{class:"btn-row3",style:""},backspace:{class:"btn-shift",style:""},numeric:{class:"btn-shift",style:""},",":{class:"btn-row4",style:""},emoji:{class:"btn-row4",style:""}," ":{class:"btn-space",style:""},".":{class:"btn-row4",style:""},"\n":{class:"btn-shift",style:""}},this.key_labels={q:"q",w:"w",e:"e",r:"r",t:"t",y:"y",u:"u",i:"i",o:"o",p:"p",a:"a",s:"s",d:"d",f:"f",g:"g",h:"h",j:"j",k:"k",l:"l",shift:"â‡§",z:"z",x:"x",c:"c",v:"v",b:"b",n:"n",m:"m",backspace:"âŒ«",numeric:"",",":",",emoji:"ðŸ™‚"," ":"_",".":".","\n":"âŽ"},this.key_actions={q:this.keyFunWraper(this.keyClicked),w:this.keyFunWraper(this.keyClicked),e:this.keyFunWraper(this.keyClicked),r:this.keyFunWraper(this.keyClicked),t:this.keyFunWraper(this.keyClicked),y:this.keyFunWraper(this.keyClicked),u:this.keyFunWraper(this.keyClicked),i:this.keyFunWraper(this.keyClicked),o:this.keyFunWraper(this.keyClicked),p:this.keyFunWraper(this.keyClicked),a:this.keyFunWraper(this.keyClicked),s:this.keyFunWraper(this.keyClicked),d:this.keyFunWraper(this.keyClicked),f:this.keyFunWraper(this.keyClicked),g:this.keyFunWraper(this.keyClicked),h:this.keyFunWraper(this.keyClicked),j:this.keyFunWraper(this.keyClicked),k:this.keyFunWraper(this.keyClicked),l:this.keyFunWraper(this.keyClicked),shift:this.keyFunWraper(this.shiftClicked),z:this.keyFunWraper(this.keyClicked),x:this.keyFunWraper(this.keyClicked),c:this.keyFunWraper(this.keyClicked),v:this.keyFunWraper(this.keyClicked),b:this.keyFunWraper(this.keyClicked),n:this.keyFunWraper(this.keyClicked),m:this.keyFunWraper(this.keyClicked),backspace:this.keyFunWraper(this.backspaceClicked),numeric:this.keyFunWraper(this.numClicked),",":this.keyFunWraper(this.commaClicked),emoji:this.keyFunWraper(this.keyClicked)," ":this.keyFunWraper(this.spaceClicked),".":this.keyFunWraper(this.dotClicked),"\n":this.keyFunWraper(this.enterClicked)},this.standard_keys=["shift","backspace","numeric",",","emoji"," ",".","\n"]},mounted(){this.updateBoard()},methods:{original_leave:function(t){t.original_show=!1,clearTimeout(this.key_timeouts[t])},original_down:function(t){t.key!=t.original_key?this.key_timeouts[t]=setTimeout((()=>{t.original_show=!0}),500):"backspace"==t.key&&(this.key_timeouts[t]=setTimeout((()=>{this.key_timeouts[t]=setInterval((()=>{this.backspaceClicked(t)}),50)}),500))},original_up:function(t){t.original_show?t.original_action(Object.assign(Object.assign({},t),{label:t.original_label,key:t.original_key,action:t.original_action})):("backspace"==t.key&&clearTimeout(this.key_timeouts[t]),t.action(t))},original_mouseleave:function(t){if(this.$q.platform.is.mobile)return!1;this.original_leave(t)},original_mousedown:function(t){if(this.$q.platform.is.mobile)return!1;this.original_down(t)},original_mouseup:function(t){if(this.$q.platform.is.mobile)return!1;this.original_up(t)},original_touchstart:function(t){this.original_down(t)},original_touchend:function(t){this.original_up(t)},original_touchcancel:function(t){this.original_leave(t)},showNotSupported:function(){this.$q.notify({type:"info",timeout:100,message:"Not supported"})},shiftClicked:function(t){this.showNotSupported()},numClicked:function(t){this.showNotSupported()},spaceClicked:function(t){this.insertWord(this.inp)},dotClicked:function(t){this.insertWord(this.inp+".")},commaClicked:function(t){this.insertWord(this.inp+",")},enterClicked:function(t){this.insertWord(this.inp,"\n")},keyFunWraper:function(t){return e=>{t(e),this.$emit("keypressed",e)}},backspaceClicked:function(t){if(this.inp.length>0)this.inp=this.inp.substring(0,this.inp.length-1),this.updateBoard();else{" "!=this.text[this.text.length-1]&&"."!=this.text[this.text.length-1]&&","!=this.text[this.text.length-1]&&"\n"!=this.text[this.text.length-1]||(this.text=this.text.substring(0,this.text.length-1));let t=this.text.split(" "),e=t.length;this.text=e>1?t.slice(0,e-1).join(" ")+" ":"",this.inp=t[e-1]}},keyClicked:function(t){this.inp=this.inp+t.label,this.updateBoard()},insertWord:function(t,e=" "){this.text+=t+e,this.inp="",this.rightWord="",this.leftWord="",this.updateBoard()},updateBoard:function(){let t=(t,e)=>{for(let i in this.key_positions){let s=this.key_positions[i].row,o=this.key_positions[i].col;if(s==t&&o==e)return i}throw"ERROR: cannot find"},e=Array.from(this.lettersLeft).concat(this.standard_keys);this.lettersLeft.size<1?e=Object.keys(this.key_neighbors):this.lettersLeft.size;let i=this.map_keys(e).reverse(),s=this.board.map((t=>[...t]));while(i.length>0){let t=i.pop(),e=t.neigh.map((e=>({row:this.key_positions[e].row,col:this.key_positions[e].col,original_key:e,original_label:this.key_labels[e],original_action:this.key_actions[e],key:t.key,label:t.label,neigh:this.key_neighbors[e],style:this.key_style[e].style,class:this.key_style[e].class,action:this.key_actions[e]})));if(void 0==s[t.row][t.col].key){let o=this.key_positions[t.original_key],n=this.key_positions[t.key],l=Math.sqrt(Math.pow(o.row-n.row,2)+Math.pow(o.col-n.col,2));if(l<2){let o=i.filter((e=>e.label==t.label&&Math.sqrt(Math.pow(t.row-e.row,2)+Math.pow(t.col-e.col,2))<=Math.sqrt(2))).length+[].concat(...s).filter((e=>e.label==t.label&&Math.sqrt(Math.pow(t.row-e.row,2)+Math.pow(t.col-e.col,2))<=Math.sqrt(2))).length;(o>1||t.label==t.original_label)&&(s[t.row][t.col]={row:t.row,col:t.col,original_key:t.original_key,original_label:t.original_label,original_action:t.original_action,key:t.key,label:t.label,style:t.style,class:t.class,action:t.action},i.unshift(...e.reverse()))}}}for(let h=0;h<s.length;h++)for(let e=0;e<s[h].length;e++){let i=s[h][e];if(void 0==i||void 0==i.key||void 0==i.label){let i=t(h,e);s[h][e]={row:h,col:e,original_key:i,original_label:this.key_labels[i],original_action:this.key_actions[i],key:i,label:this.key_labels[i],style:this.key_style[i].style,class:this.key_style[i].class,action:this.key_actions[i]}}}let o=["#ffe0de","#defffe","#e6ffde","#fffede","#f3e8ff","#fff4e8","#fae4ef","#f5ebc1","#f5aff7","#fcd666","#ffe6fa","#f7bea6","#fabaf5","#f4ccf8","#ccf5c5","#e5e4cb","#c02750","#f9166d","#e4f22c","#c68065","#40df8d","#68ce12","#9f7ab8","#945883","#8d9a11","#2af87e","#b58f6f","#5f35a3","#0ea4fb","#a8b289","#a17289","#fae4ef","#7497aa","#c5af37","#0cd666","#8f864a","#f7bea6","#9aba15","#647c58","#8c35b5","#45e49b","#c02750","#f9166d","#e4f22c","#c68065","#40df8d","#68ce12","#9f7ab8","#945883","#8d9a11","#2af87e","#b58f6f"],n=0,l=e.map((t=>{let e=[].concat(...s);return e.map((e=>e.key==t)).reduce(((t,e)=>t+e))})),r=l.map((t=>t>1&&o[n++])),a=this.zip(e,r);for(let h of s)for(let t of h)a[t.key]&&(t.style=`${t.style}; background-color: ${a[t.key]}`);Object.assign(this.boardView,s)},zip:function(t,e,i={}){return t.map(((t,s)=>{i[t]=e[s]})),i},reset:function(){this.inp="",this.text=""},map_keys:function(t){return t.filter((t=>Object.keys(this.key_neighbors).includes(t))).map((t=>({row:this.key_positions[t].row,col:this.key_positions[t].col,original_key:t,original_label:this.key_labels[t],original_action:this.key_actions[t],key:t,label:this.key_labels[t],neigh:this.key_neighbors[t],style:this.key_style[t].style,class:this.key_style[t].class,action:this.key_actions[t]})))},findSimilar:function(t){let e=this.wordsLeft;this.lettersLeft;e.size>0?this.leftWord=e[0]:this.leftWord="",e.size>1?this.rightWord=e[1]:this.rightWord=""}}});var w=i(3187),b=i(7518),g=i.n(b);f.render=u;const m=f;g()(f,"components",{QBtn:w.Z});i(52);const _=(0,s.aZ)({name:"MainLayout",components:{KeydropKeyboard2:m},setup(){return{}},data(){return{text:""}},computed:{displayText:function(){console.log(this.text);let t=this.text.lastIndexOf(" "),e=(this.text.lastIndexOf("."),this.text.lastIndexOf(","),this.text.lastIndexOf("\n")),i=Math.max(e,t),s="",o="";return i==this.text.length-1?s=this.text:(s=this.text.substring(0,i+1),o=this.text.substring(i+1,this.text.length)),s=s.replace(/ /g,"<wbr>&nbsp;"),s=s.replace(/\n/g,"<br/>"),s=s+"<u>"+o+"</u>",this.text.length>0&&(s+='<span style="color:blue; font-size: 1rem; font-weight:900;" class="blink">|</span>'),s}},created(){},mounted(){localStorage.setItem("demoCompleted",!0)},methods:{}});var v=i(3066),x=i(9570),W=i(2652),C=i(151),j=i(5589),F=i(1762),q=i(3747);_.render=n;const O=_;g()(_,"components",{QLayout:v.Z,QToolbar:x.Z,QBtn:w.Z,QPageContainer:W.Z,QCard:C.Z,QCardSection:j.Z,QFooter:F.Z,QToolbarTitle:q.Z})}}]);